<p class="title">My students</p>


<div class="myStudentContainer">
  <div class="subtitle">Active</div>
  <div>
    <div class="wrapper">
      <div class="column" *ngFor="let student of student; let i = index">
        <div class="card" *ngIf="student.foreignStudent.isMatched !== 'met'">
          <div class="one-line">
            <div class="icon">
              <app-icon name="person"></app-icon>
            </div>
            <div class="card-date">{{date[i].toLocaleString("ru-RU")}}</div>


            <div *ngIf="date[i] < currentDate && isShowMessage">
              <div class="backdrop" (click)="isShowMessage = false"></div>

              <div class="messageMeeting">

                <div class="messageMeetingTitle">Have you met a student?</div>

                <div class="card">
                  <div class="one-line">
                    <div class="icon">
                      <app-icon name="person"></app-icon>
                    </div>
                    <div class="card-date">{{date[i].toLocaleString("ru-RU")}}</div>
                  </div>
                  <div class="card-faculty">Faculty: {{student.localFaculty}}</div>
                  <div class="card-text">Country: {{student.foreignStudent.homeCountry}}</div>
                  <div class="card-btn-container">
                    <button class="btn btn-secondary"
                            (click)="onInfoStudent(student.tagList, student.id, student.gender, student.birthDate, student.foreignStudent.homeCountry, student.campus,
                  student.localFaculty, student.foreignStudent.homeUniversity, student.foreignStudent.localGroup, student.about,
                   student.foreignStudent.arrivalDateTime, student.foreignStudent.arrivalPlace, student.foreignStudent.residencePlace,
                   student.foreignStudent.address, student.email, student.name, student.surname)">
                      info
                    </button>
                    <button class="btn btn-primary" (click)="acceptHandler(student.id)">Accept</button>
                  </div>
                </div>

                <div style="margin-top: 32px">
                  <button class="btn btn-secondary btn-assign" (click)="isShowMessage = false">Close</button>
                </div>

              </div>
            </div>


          </div>
          <div class="card-faculty">Faculty: {{student.localFaculty}}</div>
          <div class="card-text">Country: {{student.foreignStudent.homeCountry}}</div>
          <div class="card-btn-container">
            <button class="btn btn-secondary"
                    (click)="onInfoStudent(student.tagList, student.id, student.gender, student.birthDate, student.foreignStudent.homeCountry, student.campus,
                  student.localFaculty, student.foreignStudent.homeUniversity, student.foreignStudent.localGroup, student.about,
                   student.foreignStudent.arrivalDateTime, student.foreignStudent.arrivalPlace, student.foreignStudent.residencePlace,
                   student.foreignStudent.address, student.email, student.name, student.surname)">
            info
            </button>
            <button *ngIf="student.foreignStudent.arrivalDate < currentDate" class="btn btn-primary"
                    (click)="acceptHandler(student.id)">accept
            </button>
            <button *ngIf="!(student.foreignStudent.arrivalDate < currentDate)" class="btn btn-primary"
                    (click)="takeHandler(student.id)">delete
            </button>
          </div>
        </div>
        <div *ngIf="id === student.id">

          <app-student-info
            [gender]="this.gender"
            [birthDate]="this.birthDate"
            [citizenship]="this.homeCountry"
            [localFaculty]="this.localFaculty"
            [homeUniversity]="this.homeUniversity"
            [about]="this.about"
            [tagList]="this.tagList"
            [campus] = "this.campus"
            [email]="this.email"
            [category]="this.localGroup"
            [arrivalDate]="this.arrivalDate"
            [arrivalTime]="this.arrivalTime"
            [arrivalPlace]="this.arrivalPlace"
            [place]="this.residencePlace"
            [address]="this.address"
            [name]="this.name"
            (clicked)="id = -1"

          ></app-student-info>
        </div>
      </div>
    </div>
  </div>


  <div class="subtitle">Archive</div>
  <div>
    <div class="wrapper">
      <div class="column" *ngFor="let student of student; let i = index">
        <div class="card" *ngIf="student.foreignStudent.isMatched === 'met'">
          <div class="one-line">
            <div class="icon">
              <app-icon name="person"></app-icon>
            </div>
            <div class="card-date">{{date[i].toLocaleString("ru-RU")}}</div>
          </div>
          <div class="card-faculty">Faculty: {{student.localFaculty}}</div>
          <div class="card-text">Country: {{student.foreignStudent.homeCountry}}</div>
          <div class="card-btn-container">
            <button class="btn btn-secondary"
                    (click)="onInfoStudent(student.tagList, student.id, student.gender, student.birthDate, student.foreignStudent.homeCountry, student.campus,
                  student.localFaculty, student.foreignStudent.homeUniversity, student.foreignStudent.localGroup, student.about,
                   student.foreignStudent.arrivalDateTime, student.foreignStudent.arrivalPlace, student.foreignStudent.residencePlace,
                   student.foreignStudent.address, student.email, student.name, student.surname)">
              info
            </button>
          </div>
        </div>
        <div *ngIf="id === student.id">

          <app-student-info
            [gender]="this.gender"
            [birthDate]="this.birthDate"
            [citizenship]="this.homeCountry"
            [localFaculty]="this.localFaculty"
            [homeUniversity]="this.homeUniversity"
            [about]="this.about"
            [tagList]="this.tagList"
            [campus]="campus"
            [email]="this.email"
            [category]="this.localGroup"
            [arrivalDate]="this.arrivalDate"
            [arrivalTime]="this.arrivalTime"
            [arrivalPlace]="this.arrivalPlace"
            [place]="this.residencePlace"
            [address]="this.address"
            [name]="this.name"
            (clicked)="id = -1"

          ></app-student-info>
        </div>
      </div>
    </div>
  </div>
</div>


<div *ngIf="isShowPopUp">

  <div class="backdrop" (click)="isShowPopUp = false"></div>

  <div class="messageMain">

    <div class="messageTitle">Write to the email</div>
    <div class="messageText">{{deleteMatch}}</div>

    <app-input [(ngModel)]="adminEmail" [disabled]="true"></app-input>

    <div style="margin-top: 32px">
      <button class="btn btn-primary btn-assign" (click)="isShowPopUp = false">OK</button>
    </div>

  </div>
</div>



